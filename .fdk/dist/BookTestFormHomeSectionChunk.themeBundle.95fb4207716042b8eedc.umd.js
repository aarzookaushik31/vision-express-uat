function isRunningOnClient(){return"undefined"!=typeof window&&globalThis===window}isRunningOnClient()||(globalThis.queueMicrotask||(globalThis.queueMicrotask=function(e){Promise.resolve().then(e)}),globalThis.Response||(globalThis.Response=class{constructor(){}static error(){return{}}static json(){return"{}"}static redirect(){return{}}})),(Object("undefined"!=typeof self?self:this).webpackChunkthemeBundle=Object("undefined"!=typeof self?self:this).webpackChunkthemeBundle||[]).push([[931],{30578:(e,t,n)=>{n.d(t,{A:()=>s,M:()=>a});const a="query support($slug: String!) {\n  support {\n    custom_form(slug: $slug) {\n      id\n      application_id\n      description\n      header_image\n      inputs\n      login_required\n      should_notify\n      slug\n      success_message\n      title\n    }\n  }\n}",s="mutation SubmitCustomForm($slug: String!, $customFormSubmissionPayloadInput: CustomFormSubmissionPayloadInput!) {\n    submitCustomForm(slug: $slug, customFormSubmissionPayloadInput: $customFormSubmissionPayloadInput) {\n      message\n      ticket {\n        category {\n          display\n        }\n      }\n    }\n  }\n"},37294:(e,t,n)=>{n.r(t),n.d(t,{Component:()=>i,default:()=>m,settings:()=>u});var a=n(4883),s=n.n(a),o=n(71605),r=n(78140),l=n(48447),c=n(30578);function i({props:e={}}){const[t,n]=(0,a.useState)({}),[i,u]=(0,a.useState)(!0),[m,p]=(0,a.useState)(null),[d,y]=(0,a.useState)(!1),{image:b,imageTitle:g,imageText:k}=e,E="book-an-eye-test-home",[h,f]=(0,a.useState)({}),[v,T]=(0,a.useState)({});(0,a.useEffect)(()=>{(async()=>{try{const e={slug:E},t=await fpi.executeGQL(c.M,e);if(t?.data?.support){n(t?.data?.support?.custom_form);const e={},a={};t.data.support.custom_form.inputs.forEach(t=>{e[t.key]="checkbox"!==t.type&&"",a[t.key]=""}),f(e),T(a)}else p("Fields not found in response");u(!1)}catch(e){p(e),u(!1)}})()},[E]);const S=e=>{const{name:t,value:n,type:a,checked:s}=e.target;f(e=>({...e,[t]:"checkbox"===a?s:n}))};return i?s().createElement("div",null,"Loading..."):m?s().createElement("div",null,"Error: ",m):s().createElement("div",{className:o.A.booktest_container},s().createElement("div",{className:o.A.breadcrumbs},s().createElement("a",{href:"/"},"Home /")," Book an Eye Test"),s().createElement("div",{className:o.A.bookTestTabs},s().createElement("div",null,s().createElement("a",{href:"/sections/book-an-eye-test"},"Book An Eye Test - IN STORE")),s().createElement("div",{className:o.A.activeTab},"HOME EYE TEST APPOINTMENT")),s().createElement("div",{className:o.A.booktest_content},b?.value&&s().createElement("div",{className:o.A.image_section},s().createElement("img",{src:b.value,alt:"Book Test"}),s().createElement("div",{className:o.A.textOverImage},g?.value&&s().createElement("h2",null,g.value),k?.value&&s().createElement("p",{dangerouslySetInnerHTML:{__html:k.value}}))),s().createElement("div",{className:`${o.A.form_section} ${d?o.A.successBackground:""}`},d?s().createElement("div",{className:o.A.success_wrapper},s().createElement("span",{className:o.A.closeSuccessButton,onClick:()=>{y(!1)}},s().createElement(l.A,{className:o.A.closeIcon})),s().createElement("img",{src:r}),s().createElement("h2",{className:o.A.success_message},"Home Eye Test Appointment Confirmed"),s().createElement("p",null,"Your booking has been received successfully. ",s().createElement("br",null),s().createElement("br",null),"A Vision Express representative will contact you soon to confirm your time slot and address. Our certified optometrists will ensure a safe and thorough eye test, right at your home."),s().createElement("a",{href:"/products"},"Explore Products")):s().createElement("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{let e=!0;const t={...v},n=new Date;return Object.keys(h).forEach(a=>{const s=h[a];"full-name"!==a||/^[A-Za-z\s]+$/.test(s)?"contact-number"!==a||/^\d{10}$/.test(s)&&!/^(\d)\1{9}$/.test(s)?"email"!==a||/^\S+@\S+\.\S+$/.test(s)?"date"===a&&new Date(s)<n&&(t[a]="Date cannot be in the past",e=!1):(t[a]="Enter a valid email address",e=!1):(t[a]="Enter a valid 10 digit mobile number",e=!1):(t[a]="Only letters and spaces allowed",e=!1)}),T(t),e})())return;const n=t.inputs.map(e=>{const t=h[e.key];return"checkbox"===e.type?{key:e.key,value:t?e.enum[0].key:""}:{key:e.key,value:t}}),a={slug:E,customFormSubmissionPayloadInput:{response:n}};try{await fpi.executeGQL(c.A,a),y(!0);const e={};Object.keys(h).forEach(t=>e[t]="checkbox"!==t&&""),f(e)}catch(e){console.error("Form submission error:",e)}}},t.inputs.map(e=>s().createElement("div",{className:o.A.fgroup,key:e.key},"checkbox"!==e.type&&s().createElement("label",null,e.display),"date"===e.key?s().createElement("input",{type:"date",name:e.key,value:h[e.key],onChange:S,min:(new Date).toISOString().split("T")[0],placeholder:"YYYY-MM-DD",required:e.required}):"text"===e.type||"email"===e.type?s().createElement("input",{type:"contact-number"===e.key?"tel":e.type,name:e.key,value:h[e.key],onChange:S,placeholder:e.placeholder,required:e.required}):"number"===e.type?s().createElement("input",{type:e.type,name:e.key,value:h[e.key],onChange:S,placeholder:e.placeholder,required:e.required}):"dropdown"===e.type?s().createElement("select",{name:e.key,value:h[e.key],onChange:S,required:e.required},s().createElement("option",{value:""},"Select ",e.display),e.enum?.map((e,t)=>s().createElement("option",{key:e.key||t,value:e.key},e.display||e.key))):"checkbox"===e.type?s().createElement("label",{className:o.A.checkbox_label},s().createElement("input",{type:"checkbox",name:e.key,checked:h[e.key]||!1,onChange:S,required:e.required}),e.display):null,v[e.key]&&s().createElement("span",{className:o.A.error_message},v[e.key]))),s().createElement("div",{className:o.A.sgroup},s().createElement("input",{className:o.A.submit_btn,type:"submit",value:"Submit"}))))))}const u={label:"Book Test Home Form",props:[{type:"image_picker",id:"image",label:"Right Side Image"},{type:"text",id:"imageTitle",label:"Title on Image",default:"HOME EYE TEST APPOINTMENT"},{type:"text",id:"imageText",label:"Text on Image"}]};i.settings=u;const m=i},71605:(e,t,n)=>{n.d(t,{A:()=>a});const a={booktest_container:"F1VAf",breadcrumbs:"mMVst",bookTestTabs:"Oc7ef",activeTab:"Pyi5i",form_title:"SJV0W",booktest_content:"F2XH1",image_section:"vErR2",textOverImage:"y6_4W",form_section:"tLPyc",successBackground:"ZkMlu",fgroup:"hhGVR",checkbox_label:"VCl_t",error_message:"MS4jn",sgroup:"AgRvz",submit_btn:"DmIqO",success_wrapper:"OcldW",closeSuccessButton:"B5Joa"}},78140:e=>{e.exports="https://cdn.fynd.com/v2/falling-surf-7c8bb8/fyprod/wrkr/organization/687f0bb35ece7c51f1986525/theme/assets/f11bb759c380555f28fa.png"}}]);